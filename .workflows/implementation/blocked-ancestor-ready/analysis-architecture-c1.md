AGENT: architecture
FINDINGS:
- FINDING: BlockedConditions duplicates ancestor CTE instead of composing from helpers
  SEVERITY: medium
  FILES: internal/cli/query_helpers.go:64-93
  DESCRIPTION: The `BlockedConditions()` function contains a hand-written copy of the recursive ancestor CTE that also exists in `ReadyNoBlockedAncestor()`. The code-quality principle "Compose, Don't Duplicate" explicitly states: "If you have a query for ready items, the query for blocked items should be open AND NOT ready -- not an independently authored query that could drift." The stats code already gets this right (`stats.Blocked = stats.Open - stats.Ready`), but `BlockedConditions()` independently reimplements all three EXISTS clauses rather than composing from the individual helper functions. If any helper (e.g., `ReadyNoUnclosedBlockers()`, `ReadyNoOpenChildren()`, `ReadyNoBlockedAncestor()`) is modified, `BlockedConditions()` must be manually updated in lockstep or it silently drifts. This is the exact failure mode the principle warns against. `BlockedConditions()` could compose its OR clause by negating each NOT EXISTS helper (stripping the "NOT" prefix) or by expressing itself as `open AND NOT (all ready conditions)`. For example, a `BlockedHasBlockedAncestor()` helper could simply return the EXISTS form derived from flipping `ReadyNoBlockedAncestor()`, or `BlockedConditions()` could be built by joining the negated ready sub-conditions with OR.
  RECOMMENDATION: Refactor `BlockedConditions()` to derive its OR clause from the existing `ReadyNoUnclosedBlockers()`, `ReadyNoOpenChildren()`, and `ReadyNoBlockedAncestor()` helpers by negating them (converting NOT EXISTS to EXISTS). This eliminates the duplicated CTE SQL and ensures any future changes to ready logic automatically propagate to blocked logic.
SUMMARY: The implementation is structurally sound with clean helper decomposition and thorough integration tests, but BlockedConditions duplicates SQL from the individual ready helpers instead of composing from them, creating a drift risk that directly violates the project's "Compose, Don't Duplicate" quality principle.
