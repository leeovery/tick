AGENT: architecture
FINDINGS:
- FINDING: RunMigrate does not call WriteFailures — failure detail section is silently dropped
  SEVERITY: high
  FILES: internal/cli/migrate.go:123-135, internal/migrate/presenter.go:48-69
  DESCRIPTION: The `Present` function in `presenter.go` (line 74-81) composes `WriteHeader`, `WriteResult`, `WriteSummary`, and `WriteFailures` into the correct output sequence. However, `RunMigrate` in `migrate.go` manually calls the individual presenter functions (lines 124-133) and omits `WriteFailures`. This means the spec-mandated failure detail section (the "Failures:" block listing each failed task with its reason) is never rendered in actual CLI execution. The `Present` function exists and correctly includes `WriteFailures`, but nothing calls `Present` — the CLI bypasses it. The `WriteFailures` function is tested in isolation and via `Present` tests, but the CLI integration tests use `strings.Contains` assertions that don't detect the missing section.
  RECOMMENDATION: Replace the manual `WriteHeader`/`WriteResult`/`WriteSummary` calls in `RunMigrate` with a single call to `Present(stdout, provider.Name(), dryRun, results)`. This is the purpose of the `Present` function and eliminates the composition gap. Alternatively, add `migrate.WriteFailures(stdout, results)` after `WriteSummary` in `RunMigrate`.

- FINDING: MigratedTask.Status uses raw strings instead of task.Status type constants
  SEVERITY: medium
  FILES: internal/migrate/migrate.go:11-16, internal/migrate/engine.go:6-9, internal/migrate/beads/beads.go:18-22, internal/migrate/store_creator.go:52-55
  DESCRIPTION: The `task` package defines `type Status string` with constants (`StatusOpen`, `StatusDone`, `StatusCancelled`, `StatusInProgress`). The migrate package re-declares the same status values as raw string literals in three independent maps: `validStatuses` (migrate.go:11), `completedStatuses` (engine.go:6), and `statusMap` (beads.go:18). If a status value changes in the `task` package (e.g., "cancelled" becomes "canceled"), these three maps would silently produce wrong behavior. The `MigratedTask.Status` field is `string` rather than `task.Status`, which means the type system cannot catch mismatches. In `store_creator.go:52`, a raw cast `task.Status(mt.Status)` converts the untyped string to the typed status — this is the exact pattern code-quality.md warns against ("runtime type checks inside implementations signal the signature should be more specific").
  RECOMMENDATION: Change `MigratedTask.Status` to `task.Status` and replace the string-literal maps with references to the `task` package constants. For `validStatuses`, consider a function like `task.IsValidStatus(s)` in the task package or reference the constants directly. For `completedStatuses`, use `task.StatusDone` and `task.StatusCancelled`. For the beads `statusMap`, map to `task.StatusOpen`, `task.StatusInProgress`, `task.StatusDone`.

- FINDING: Beads provider silently swallows all per-line errors — no visibility into skipped entries
  SEVERITY: medium
  FILES: internal/migrate/beads/beads.go:90-107
  DESCRIPTION: The beads provider's `Tasks()` method silently skips malformed JSON lines (line 93), empty-title entries (line 99), and validation failures (line 104) with no mechanism to report what was skipped. The spec says "Continue on error, report failures at end" and the presenter has infrastructure for failure reporting. But because the provider swallows these errors before they reach the engine, the user gets zero visibility into skipped source entries. If a JSONL file has 100 entries and 20 are malformed, the user sees "Done: 80 imported, 0 failed" with no indication that 20 entries were dropped. This contradicts the spec's error reporting intent. By contrast, the engine correctly reports validation and insertion failures that reach it.
  RECOMMENDATION: Return all parseable entries from the provider (including those with empty titles) and let the engine's validation catch them so they appear as failed Results with explanations. For truly unparseable JSON lines, consider returning them as a separate error/warning list or including a sentinel MigratedTask that will fail validation with a descriptive message.

SUMMARY: One high-severity seam gap where RunMigrate bypasses the Present function and drops the failure detail section from CLI output. Two medium issues: status values are stringly-typed across three independent maps instead of using the existing task.Status type, and the beads provider silently swallows errors that should surface as reported failures.
